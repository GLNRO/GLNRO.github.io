<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="L Gallinaro"><link rel="icon" href="/img/oroboro.png"><title>Lauren Gallinaro</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="Lauren Gallinaro" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/highlight.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img src="/img/full_name_white.png" class="name-title"></a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/archives">Archive</a></li><li><a href="http://www.laurengallinaro.com">Work</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/img/white_oroboro.png" class="avatar-img"></a></div></div></div></nav><header class="header-section"><div class="intro-header no-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>Up And Running With React &amp; Redux &amp; Three.JS Part 2</h1><p class="post-meta">Posted on Jan 25 2018 · <a href="/tags/react-redux-three-js/" class="tag post-meta">react redux three.js</a></p></div></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role="main" class="blog-post"><h2 id="Part-2-…-introducing-redux"><a href="#Part-2-…-introducing-redux" class="headerlink" title="Part 2 … introducing redux"></a>Part 2 … introducing redux</h2><p>In the first part of this post, I walked through the basic setup of a React application. Part 2 will detail the setup for Redux to manage our state, and Sagas to handle our actions’ side effects (asynchronous calls and whatnot).</p>
<h3 id="Setting-up-the-store"><a href="#Setting-up-the-store" class="headerlink" title="Setting up the store"></a>Setting up the store</h3><p>Setting up our Store will require us first to create our root reducer file. If you only have a single reducer, you can simply pass it to the store upon creation. However, as the application grows, keeping it separated is cleaner.</p>
<p>In our reducer, we’ll require combineReducers from redux with will allow us to combine all of our future reducers that we’ll pass to Store upon creation/initialization.</p>
<h5 id="src-Reducer-js"><a href="#src-Reducer-js" class="headerlink" title="src/Reducer.js"></a>src/Reducer.js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; combineReducers &#125; from &apos;redux&apos;;</span><br><span class="line">import counterReducer from &apos;../counter/CounterReducer;</span><br><span class="line"></span><br><span class="line">const RootReducer = combineReducers(&#123;</span><br><span class="line">    counter: counterReducer</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default RootReducer;</span><br></pre></td></tr></table></figure>
<p>Next we’ll create our Store also in src. Our store is also where we’ll configure our middleware, and require our reducer.</p>
<h5 id="src-Store-js"><a href="#src-Store-js" class="headerlink" title="src/Store.js"></a>src/Store.js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createStore, applyMiddleware &#125; from &apos;redux&apos;;</span><br><span class="line">import &#123; createLogger &#125; from &apos;redux-logger&apos;;</span><br><span class="line">import createSagaMiddleware from &apos;redux-saga&apos;;</span><br><span class="line">import RootReducer from &apos;Reducer&apos;;</span><br><span class="line"></span><br><span class="line">const logger = createLogger()</span><br><span class="line">const sagaMiddleware = createSagaMiddleware();</span><br><span class="line"></span><br><span class="line">const store = createStore(</span><br><span class="line">    RootReducer,</span><br><span class="line">    applyMiddleware(sagaMiddleware, logger)</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">export default store</span><br></pre></td></tr></table></figure>
<p>At present we don’t have any actions warranting the use of a saga, so we don’t have a rootSaga that we would then call to run (this will come in a bit). Next we’ll want to hook up our store to our application by passing it to the Provider which will now wrap our application in index.js. We need to make sure to import Provider from react-redux and our store.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line">import &#123; Provider &#125; from &apos;react-redux&apos;;</span><br><span class="line">import Store from &apos;./Store&apos;;</span><br><span class="line">import App from &apos;./App&apos;;</span><br><span class="line">import &apos;./index.css&apos;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;Store&#125;&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  document.getElementById(&apos;main&apos;));</span><br></pre></td></tr></table></figure>
<h3 id="Setting-up-a-Connected-Component"><a href="#Setting-up-a-Connected-Component" class="headerlink" title="Setting up a Connected Component"></a>Setting up a Connected Component</h3><p>Before we can run our application, we’ll need to go ahead and create the reducer that our root reducer imports. From there we’ll build out our connected component. For the purpose of simplicity, the connected component will be a simple counter.</p>
<p>Start by creating a new directory in src/, counter/, and touching CounterReducer.js, CounterActions.js and CounterActionTypes.js</p>
<p>CounterActionTypes.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const INCREMENT_COUNTER = &apos;INCREMENT_COUNTER&apos;;</span><br></pre></td></tr></table></figure></p>
<p>For now it might seem overkill to give the action type its own file but I find this helps to illustrate the responsibility of each part of our component’s data flow by distinguishing our action types from the actual action that will be dispatched…</p>
<p>CounterActions.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export const incrementCounter = () =&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    type:  &apos;INCREMENT_COUNTER&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The counterReducer only has one value, and the only action it will be listening for is an increment action. As the function of the reducer grows, it’s good house keeping to import the action types from a separate actions file.</p>
<p>CounterReducer.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; INCREMENT_COUNTER &#125; from &apos;./CounterActionTypes&apos;;</span><br><span class="line"></span><br><span class="line">const initialState = &#123;</span><br><span class="line">  counterValue: 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const counterReducer = (state = initialState, action) =&gt; &#123;</span><br><span class="line">  switch(action.tyoe)&#123;</span><br><span class="line">    case INCREMENT_COUNTER:</span><br><span class="line">      let newValue = state.counterValue +=1</span><br><span class="line">      return &#123;...state, counterValue: newValue&#125;</span><br><span class="line">    default:</span><br><span class="line">      return state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default counterReducer;</span><br></pre></td></tr></table></figure></p>
<p>Next we’ll set up the Counter component. For now it won’t do anything aside from return some html.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">export default class Counter extends Component&#123;</span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line">    return(</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Counter Component&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  )&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We’re ready to hook up our CounterContainer with our component and reducer/actions. The CounterContainer leverages connect from react-redux to connect the redux store to our component. Map state to props will map the part of state that the component is concerned with to the props passed down to it, and map dispatch to props will do the same with our action creators, in this case, ‘incrementCounter’.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &#123; connect &#125; from &apos;react-redux&apos;;</span><br><span class="line">import &#123; bindActionCreators &#125; from &apos;redux&apos;;</span><br><span class="line">import &#123; incrementCounter &#125; from &apos;./CounterReducer&apos;;</span><br><span class="line">import Counter from &apos;./Counter.jsx&apos;;</span><br><span class="line"></span><br><span class="line">const mapStateToProps = (state) =&gt; (&#123;</span><br><span class="line">  counterValue: state.counterReducer.counterValue</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const mapDispatchToProps = (dispatch) =&gt; bindActionCreators(&#123;</span><br><span class="line">  incrementCounter: incrementCounter &#125;, dispatch);</span><br><span class="line"></span><br><span class="line">const CounterContainer = connect(mapStateToProps, mapDispatchToProps)(Counter);</span><br><span class="line"></span><br><span class="line">export default CounterContainer;</span><br></pre></td></tr></table></figure>
<p>Now we can return to the component, and use the props we’ve connected and passed down in the html that we’re returning</p>
<p>Counter.jsx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">render()&#123;</span><br><span class="line"></span><br><span class="line">    const &#123;incrementCounter, counterValue&#125; = this.propsMode</span><br><span class="line"></span><br><span class="line">    return(</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button className=&quot;increment-button&quot; onClick=&#123;incrementCounter&#125;&gt;+&lt;/button&gt;</span><br><span class="line">        &lt;h1&gt;&#123;counterValue&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  )&#125;</span><br></pre></td></tr></table></figure></p>
<p>Two last things before we build and run the application. Make sure that the new reducer is added to the root reducer, and that the CounterContainer is added in App.js</p>
<p>Reducer.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const RootReducer = combineReducers(&#123;</span><br><span class="line">  counterReducer</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>App.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import CounterContainer from &apos;./counter/CounterContainer&apos;;</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line">render()&#123;</span><br><span class="line">    return(</span><br><span class="line">      &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        &lt;h1&gt;Hello World&lt;/h1&gt;</span><br><span class="line">        &lt;CounterContainer /&gt;</span><br><span class="line">      &lt;/div&gt;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>When we click the increment button, now we’ll see the counterValue increase as a result.</p>
<p>Check out Part 3 coming soon to setup a Three.js scene component and hook it up to you redux state.</p>
</article><ul class="pager blog-pager"><li class="previous"><a href="/2018/01/26/Up-And-Running-With-React-Redux-Three-JS-3/" data-toggle="tooltip" data-placement="top" title="Up And Running With React &amp; Redux &amp; Three.JS Part 3">← Previous Post</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/glnro" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://twitter.com/_Gallinaro" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-twitter"></i></span></a></li><li><a href="https://www.linkedin.com/in/lgallinaro" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li></ul><p class="copyright text-muted">© L Gallinaro • 2018 • <a href="mailto:undefined"></a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>