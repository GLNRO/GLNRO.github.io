<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="L Gallinaro"><link rel="icon" href="/img/oroboro.png"><title>Lauren Gallinaro</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="Lauren Gallinaro" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/highlight.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img src="/img/full_name_white.png" class="name-title"></a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/archives">Archive</a></li><li><a href="http://www.laurengallinaro.com">Work</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/img/white_oroboro.png" class="avatar-img"></a></div></div></div></nav><header class="header-section"><div class="intro-header no-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>Up And Running With React &amp; Redux &amp; Three.JS without the copying/pasting...Part 1</h1><p class="post-meta">Posted on Jan 1 2020 · <a href="/tags/react-redux-three-js/" class="tag post-meta">react redux three.js</a></p></div></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role="main" class="blog-post"><p>I am always tremendously grateful for the pedagogical stewards of ‘hacking around on the internet’ who take the time to explain how to get up and running with the new Derp.js framework or Whale Box, the containerized deployment platform. After years of procrastination and being too busy to write blog posts, I will humbly attempt to throw in my two pennies about bootstrapping a React/Redux application meant to serve Three.js content.</p>
<h3 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h3><p>Packages for creating an app quick like create-a-react-app are nice to spike out a project but obscure what’s going on behind the scenes. For that reason, i’ll delve into why everything we require is being used and what its purpose is. It’s easy to take for granted that readers will know the basics of how to initialize a package or what babel loaders are when you use these tools every day, so I’ve tried to explain everything in a way that might seem overly detailed. If you think something is incorrect or could use additional explanation, I’m happy to take the feedback.</p>
<ol>
<li><p>Initialize the application (you should have node/npm installed already)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
</li>
<li><p>Install application dependencies</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save react react-dom react-redux redux redux-saga isomorphic-fetch webpack webpack-dev-server</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>We install <a href="https://github.com/facebook/react" target="_blank" rel="noopener">react</a> and <a href="https://www.npmjs.com/package/react-dom" target="_blank" rel="noopener">react-dom</a> for access to the react library and facilitate an entry point for rendering the application into the dom. We install <a href="https://redux.js.org/" target="_blank" rel="noopener">redux</a> for the library and <a href="https://github.com/reactjs/react-redux" target="_blank" rel="noopener">react-redux</a> for the react bindings for redux. Further, we’ll install <a href="https://github.com/redux-saga/redux-saga" target="_blank" rel="noopener">redux-saga</a> for when we are managing side-effects/asynchronous tasks. <a href="">Isomorphic-fetch</a> is the library we’ll use for making api calls, and <a href="https://webpack.js.org/" target="_blank" rel="noopener">webpack</a> is the module bundler for the project, and <a href="https://github.com/webpack/webpack-dev-server" target="_blank" rel="noopener">webpack-dev-server</a> for our live-reloading dev serveer. Webpack could take up its own post, so check out this <a href="https://survivejs.com/webpack/what-is-webpack/" target="_blank" rel="noopener">survivejs post</a> for further reading.</p>
<ol>
<li>Install language dependencies</li>
</ol>
<p>Babel<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save babel-core babel-loader babel-polyfill babel-preset-env babel-preset-react html-webpack-plugin</span><br></pre></td></tr></table></figure></p>
<p>We use Babel to transpile javascript to the current version your browser supports. It’s effectively future proofing your javascript so you can leverage new syntax while making sure your content is available for everyone.</p>
<p><a href="https://github.com/babel/babel/tree/master/packages/babel-core" target="_blank" rel="noopener">babel-core</a> Babel’s core library<br><a href="https://github.com/babel/babel-loader" target="_blank" rel="noopener">babel-loader</a> The Babel plugin used for Webpack<br><a href="https://babeljs.io/docs/usage/polyfill/" target="_blank" rel="noopener">babel-polyfill</a> Babel polyfill is the polyfill for older web browsers allowing for the use of new ES6 built-ins (ie Map/Promise)<br><a href="https://github.com/babel/babel/tree/master/packages/babel-preset-env" target="_blank" rel="noopener">babel-preset-env</a> Preset env replaces preset-2015 and compiles anything post 2015 down to ES5<br><a href="https://github.com/babel/babel/tree/master/packages/babel-preset-react" target="_blank" rel="noopener">babel-preset-react</a> Preset for all react plugins<br><a href="">html-webpack-plugin</a> HTML plugin for webpack</p>
<ol>
<li>Install testing dependencies</li>
</ol>
<p>For testing and debugging, we’ll use <a href="https://github.com/airbnb/enzyme" target="_blank" rel="noopener">enzyme</a> for testing react,  <a href="https://github.com/wheresrhys/fetch-mock" target="_blank" rel="noopener">fetch-mock</a> for mocking our api requests, <a href="https://www.npmjs.com/package/react-test-renderer" target="_blank" rel="noopener">react-test-renderer</a> for testing rendering without the dom, <a href="https://github.com/arnaudbenard/redux-mock-store" target="_blank" rel="noopener">redux-mock-store</a> to mock the store for integration testing, and <a href="https://github.com/evgenyrodionov/redux-logger" target="_blank" rel="noopener">redux-logger</a> for debugging redux actions and state change in the console.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev enzyme fetch-mock react-test-renderer redux-mock-store redux-logger</span><br></pre></td></tr></table></figure>
<h3 id="Project-setup"><a href="#Project-setup" class="headerlink" title="Project setup"></a>Project setup</h3><p>Now that project dependencies installed, go ahead and setup the project directory structure. We’ll have and src/ directory for our models/components and services, a test/ directory, and a public/ directory for our bundled application output (or dist/ if you prefer).</p>
<p>In src/ we’ll need an App.js, and an index.js. Our public/ directory will only hold our index.html for now.</p>
<p>src/App.js will just return some html at present, but will eventually contain our routes and top level components or containers<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">export default class App extends Component &#123;</span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line">    return(</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello World&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>src/index.js is tasked with finding the html container in our index.html and rendering our application inside (<div> ‘#main’ in this case, but you can give it any id).<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line">import App from &apos;./App&apos;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;App /&gt;, document.getElementById(&apos;main&apos;));</span><br></pre></td></tr></table></figure></div></p>
<p>Finally public/index.html will be the entry point for our application to be rendered.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;App Title&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;noscript&gt;</span><br><span class="line">      You need to enable JavaScript to run this app.</span><br><span class="line">    &lt;/noscript&gt;</span><br><span class="line">    &lt;div id=&quot;main&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="Project-configuration"><a href="#Project-configuration" class="headerlink" title="Project configuration"></a>Project configuration</h3><p>Now we’ll need to go ahead and configure webpack and babel to compile our application code. Make sure to touch a webpack.config.js and .babelrc in the root directory. You can alternatively place configuration files in a separate config/ directory, just make sure to resolve the paths in package.json as well as the webpack config.</p>
<p>Configure your .babelrc to include the presets for our application. Any plugins can be specified as well, in this case, transform-object-rest-spread as an example.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">		&quot;presets&quot;: [&quot;react&quot;, &quot;env&quot;],</span><br><span class="line">    &quot;plugins&quot;: [</span><br><span class="line">      &quot;transform-object-rest-spread&quot;</span><br><span class="line">      ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Our webpack config will first set our path variable to resolve absolute paths, and require our html-webpack-plugin</p>
<p>In the module.exports, the entry for our application will be the index.js in the src/ directory. The output (our bundled app) will be named bundle.js and will be built in the public directory.</p>
<p>There are a series of <a href="https://webpack.js.org/loaders/" target="_blank" rel="noopener">loaders</a> to bundle static resources; This project uses loaders for jsx, sass/css, as well as url and image loaders.</p>
<p>The dev server is configured to find the bundled output of the application in the public/ directory, and serve the application on port 3001.</p>
<p>Finally the only plugin used for this project will be the html webpack plugin required earlier. We set the template as the full path and filename of index.html.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">let path = require(&apos;path&apos;);</span><br><span class="line">const HtmlWebPackPlugin = require(&quot;html-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &apos;./src/index.js&apos;,</span><br><span class="line">  output:&#123;</span><br><span class="line">    filename: &apos;bundle.js&apos;,</span><br><span class="line">    path: path.resolve(__dirname, &apos;public&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">  module: &#123;</span><br><span class="line">    loaders: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /.jsx?$/,</span><br><span class="line">        loader: &apos;babel-loader&apos;,</span><br><span class="line">        exclude: /node_modules/,</span><br><span class="line">        query: &#123;</span><br><span class="line">          presets: [&apos;env&apos;, &apos;react&apos;],</span><br><span class="line">          plugins: [&apos;transform-object-rest-spread&apos;],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; test: /\.s?css$/, use: [&#123; loader: &apos;style-loader&apos; &#125;, &#123; loader: &apos;css-loader&apos; &#125;, &#123; loader: &apos;sass-loader&apos; &#125;] &#125;,</span><br><span class="line">      &#123; test: /\.woff(2)?(\?v=[0-9]\.[0-9]\.[0-9])?$/, loader: &apos;url-loader?limit=10000&amp;mimetype=application/font-woff&apos; &#125;,</span><br><span class="line">      &#123; test: /\.(ttf|eot)(\?v=[0-9]\.[0-9]\.[0-9])?$/, loader: &apos;file-loader&apos; &#125;,</span><br><span class="line">      &#123; test: /\.(gif|png|jpe?g|svg)$/i, use: [&apos;file-loader&apos;, &#123; loader: &apos;image-webpack-loader&apos;, options: &#123; bypassOnDebug: true &#125; &#125;] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">        contentBase: path.resolve(__dirname, &quot;public&quot;),</span><br><span class="line">        port: 3001</span><br><span class="line">      &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">        new HtmlWebPackPlugin(&#123;</span><br><span class="line">            template: &quot;./public/index.html&quot;,</span><br><span class="line">            filename: &quot;./index.html&quot;</span><br><span class="line">          &#125;)</span><br><span class="line">        ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>Finally we’ll add two commands, build and start, to the package.json scripts.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;build&quot;: &quot;node_modules/.bin/webpack&quot;,</span><br><span class="line">    &quot;start&quot;: &quot;node_modules/.bin/webpack-dev-server&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;repository&quot;: &#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h3><p>Build the application by running<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure></p>
<h3 id="Running-in-dev"><a href="#Running-in-dev" class="headerlink" title="Running in dev"></a>Running in dev</h3><p>Run the application in dev with<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure></p>
<p>You should be able to load the appliction in the browser at localhost:3001</p>
<p>Check out Part 2 coming soon to setup redux. Part 3 will document the setup of a basic three.js scene hooked up to our redux state.</p>
</article><ul class="pager blog-pager"><li class="next"><a href="/2018/01/26/Up-And-Running-With-React-Redux-Three-JS-3/" data-toggle="tooltip" data-placement="top" title="Up And Running With React &amp; Redux &amp; Three.JS Part 3">Next Post →</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/glnro" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://twitter.com/_Gallinaro" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-twitter"></i></span></a></li><li><a href="https://www.linkedin.com/in/lgallinaro" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li></ul><p class="copyright text-muted">© L Gallinaro • 2018 • <a href="mailto:undefined"></a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>